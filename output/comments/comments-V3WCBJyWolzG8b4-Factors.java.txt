compute normalization factor for each neighbor assignment sums idx += ptl phi assn and then normalize potential oldval old val = ptl phi assn ptl setphi set phi assn oldval old val / logz log z 0/0 = 0 complete hack assumes same var set assumes same var set assumes same var set /* get all the variables */ /* define a new potential over the neighbors of node n o d e */ sum1 = f1 logsum sum2 = f2 logsum sum1 = f1 logsum sum2 = f2 logsum 