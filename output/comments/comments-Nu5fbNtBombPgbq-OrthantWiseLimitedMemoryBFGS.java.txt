name of optimizable for value output the number of corrections used in bfgs b f g s update ideally 3 <= m <= 7 larger m means more cpu time memory state of optimizer search oldvalue old value = value before line search value = value after line search grad = gradient s = list of m previous difference in values y = list of m previous difference in grad values rho = intermediate calculation initialize optimizer state get initial get initial value get initial gradient initialize direction initialize backups create descent direction adjust for curvature fix direction signs backup and gradient then perform line search update gradient after line search check for termination conditions update hessian approximation update old params and grad backtrack line search store old value update and gradient find new value do not allow to cross orthant boundaries if using l1 regularization termination conditions 