{{{ imports }}} {{{ paintchunklist paint chunk list only paint visible chunks useful for debugging purposes }}} {{{ paintchunkbackgrounds paint chunk backgrounds only paint visible chunks {{{ paint token background color if necessary }}} }}} {{{ offsettox offset to x }}} {{{ xtooffset x to offset }}} {{{ propertieschanged properties changed /*
				 * the default font is font dialog d i a l o g if the family
				 * doesn't match any installed fonts the following
				 * check skips fonts that don't 
				 */ clear cache not to hold reference to old fonts which might become unused after properties changed }}} {{{ members {{{ instance variables set up after init }}} {{{ chunk constructor }}} {{{ chunk constructor }}} {{{ chunk constructor }}} {{{ isaccessible is accessible }}} {{{ isinitialized is initialized virtual indent normal text tab }}} {{{ istab is tab }}} {{{ snippetbefore snippet before }}} {{{ snippetafter snippet after }}} {{{ snippetbeforelineoffset snippet before line offset }}} {{{ offsettox offset to x /* shouldn't reach this */ }}} {{{ xtooffset x to offset /* shouldn't reach this */ }}} {{{ init do nothing }}} }}} {{{ members {{{ variables this cache is meant to reduce calls of layoutglyphvector layout glyph vector which was an outclassing cpu c p u bottleneck profiled on jprofiler j profiler sun jdk j d k 6 windows xp x p the capacity is roughly tuned so that the effect is clearly noticeable on very large random table in c mode like following table000 100 = { 232 190 69 80 246 78 } table000 100 = { 69 84 206 160 197 161 } table099 100 = { 219 100 60 100 203 8 } table100 100 = { 159 189 159 76 9 239 } and the additional heap usage is lower than 1 mb m b heap usage was measured as about 400 kb k b / 256 entries jre j r e 7u3 windows xp x p }}} {{{ instance variables this is either style getbackgroundcolor get background color or styles defaultid getbackgroundcolor get background color }}} {{{ getfontsubstlist get font subst list }}} {{{ getsubstfont get subst font workaround for a problem reported in sf s f net patch #3480246 > if font substitution with fonts is enabled > i get for inserted control characters strange mathematical > symbols from a non unicode font in my }}} {{{ drawglyphs draw glyphs }}} {{{ layoutglyphvector layout glyph vector fixme f i x m e need bidi bi di support this is necessary to work around a memory leak in sun 6 where the sun font glyphlayout glyph layout is cached and reused while holding an instance to the char }}} {{{ layoutglyphs layout glyphs }}} {{{ dofontsubstitution do font substitution }}} {{{ fontsubstitution font substitution a helper to build glyphvector glyph vector with least calls to layoutglyphvector layout glyph vector no matter how many the font substitution logic find intermediate boundaries }}} {{{ getglyphcache get glyph cache }}} {{{ glyphkey glyph key should be called only from glyphcache glyph cache to compare with other keys then explicit type checking and checking are not necessary }}} {{{ glyphcache glyph cache avoid rehashing with known limit /*accessorder*/ /*access order*/ }}} }}} 