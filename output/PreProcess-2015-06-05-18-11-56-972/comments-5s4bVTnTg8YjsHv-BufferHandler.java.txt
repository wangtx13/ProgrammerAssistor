{{{ bufferchangehandler buffer change handler constructor }}} {{{ bufferloaded buffer loaded }}} {{{ foldhandlerchanged fold handler changed }}} {{{ foldlevelchanged fold level changed err foldlevelchanged fold level changed + start 1 + to + textarea text area getlastphysicalline get last physical line + + end }}} {{{ contentinserted content inserted {{{ resize selections if necessary }}} }}} {{{ precontentinserted pre content inserted }}} {{{ precontentremoved pre content removed the removal will not touch inside of folds and will not modify any remaining lines will be handled later see comments at the end of transactioncomplete transaction complete }}} {{{ contentremoved content removed {{{ resize selections if necessary }}} }}} {{{ transactioncomplete transaction complete {{{ debug }}} }}} {{{ dodelayedupdate do delayed update must be done before the below call so that the chunk cache is not updated with an invisible first line see above update visible lines force the fold levels to be updated when painting the last line of a buffer buffer isfoldstart is fold start doesn't call getfoldlevel get fold level hence the foldlevelchanged fold level changed event might not be sent for the previous line }}} {{{ delayupdate delay update }}} {{{ getreadytobreakfold get ready to break fold this is a fix for black hole bug if you modify a part of folded lines like {{{ followed by }}} the fold is removed so it must be expanded otherwise the text remains invisible }}} 