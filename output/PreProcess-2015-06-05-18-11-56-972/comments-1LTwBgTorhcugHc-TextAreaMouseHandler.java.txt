{{{ mousehandler mouse handler constructor }}} {{{ mousepressed mouse pressed so that home <mouse click> home is not the same as pressing home twice in a row ignore clicks of middle button case 3 }}} {{{ dosingleclick do single click control click in virtual space inserts whitespace and moves caret so that shift click drag works so that quick copy works defer scrolling until mouserelease if result is off screen }}} {{{ dodoubleclick do click ignore empty lines }}} {{{ dotripleclick do triple click }}} {{{ mousemoved mouse moved }}} {{{ mousedragged mouse dragged case 3 }}} {{{ dosingledrag do single drag just scroll to the dragged location defer scroll to mouserelease if result is offscreen left without dragging that direction caret already offscreen left user now attempting to drag left }}} {{{ dodoubledrag do drag }}} {{{ dotripledrag do triple drag }}} {{{ mousereleased mouse released }}} {{{ ispopuptrigger is popup trigger }}} {{{ ismiddlebutton is middle button }}} {{{ isrightbutton is right button }}} {{{ {{{ getselectionpivotcaret get selection pivot caret /*
	 * dynamically get the pivot point associated with a current
	 * selection see inline comments for details 
	 */ the mental model an existing selection and then a shift+click somewhere else what happens to the selection? because a selection we need a pivot point if the caret is at the start of a selection the end of the selection pivot point so a click above the start of the caret will enlarge the selection and a click below the end will reverse the selection around the pivot point the text before the pivot will no longer be selected and the text after it and up to the click will be newly selected vice versa holds when the caret is at the end of the selection if the caret is somewhere else just give up and let the user fix it }}} {{{ getselectionpivotline get selection pivot line /*
	 * see getselectionpivotcaret get selection pivot caret for an explanation of this function
	 */ }}} }}} {{{ members /* with drag and drop on a mouse down in a selection does not
	immediately deselect */ {{{ showcursor show cursor }}} }}} 