{{{ imports }}} {{{ textareainputhandler text area input handler constructor }}} {{{ processkeyevent process key event 	log 	 log log log debug d e b u g this view+ isfocused is focused = +view isfocused is focused +' ' new if the user pressed eg c+e n n in the search bar we want focus to go back there after the prefix is done }}} {{{ processkeyeventsub process key event sub this is a weird hack we don't want c+e a to insert 'a' in the search bar if the search bar has focus }}} {{{ getaction get action }}} {{{ invokeaction action }}} {{{ invokeaction action /* if buffer insidecompoundedit inside compound edit 
			buffer endcompoundedit end compound edit */ remember the last executed action remember old values in case action changes them execute the action if repeat was originally clear it otherwise it might have been set by the action etc first of all if this action set a readnextchar read next char do not clear the repeat }}} {{{ handlekey handle key don't beep if the user presses some key we don't know about unless a prefix is active otherwise it will beep when caps lock is pressed etc f10 should be passed on but c+e f10 shouldn't let user input be only local this is retarded excuse me while i drool and make stupid noises }}} {{{ userinput user input }}} {{{ invokereadnextchar read next char this might be a bit slow if __char__ occurs a lot }}} 