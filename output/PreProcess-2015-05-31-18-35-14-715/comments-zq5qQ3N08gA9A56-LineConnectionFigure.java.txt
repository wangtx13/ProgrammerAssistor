the commented lines below must stay commented out this is because we must not set our connectors to in order to support reconnection using redo /* if evt getfigure get figure == owner getstartfigure get start figure || evt getfigure get figure == owner getendfigure get end figure { owner setstartconnector set start connector owner setendconnector set end connector }*/ drawing d r a w i n g shape s h a p e and a n d bounds b o u n d s make sure that we are still connected attributes a t t r i b u t e s editing e d i t i n g connecting c o n n e c t i n g composite c o m p o s i t e figures f i g u r e s layout l a y o u t /* liner getbezierpathlayouter get bezier path layouter { liner getattribute get attribute bezier_path_layouter } setbezierpathlayouter set bezier path layouter liner newvalue new value { setattribute set attribute bezier_path_layouter newvalue new value } /** * lays out the connection this is called when the connection * itself changes by default the connection is recalculated * / layoutconnection layout connection { if getstartconnector get start connector != getendconnector get end connector != { willchange will change liner bpl = getbezierpathlayouter get bezier path layouter if bpl != { bpl lineout this } else { if getstartconnector get start connector != { point2d point2 d start = getstartconnector get start connector findstart find start this if start != { basicsetstartpoint basic set start point start } } if getendconnector get end connector != { point2d point2 d end = getendconnector get end connector findend find end this if end != { basicsetendpoint basic set end point end } } } changed } } */ cloning c l o n i n g event e v e n t handling h a n d l i n g /* if getstartconnector get start connector != getendconnector get end connector != { handleconnect handle connect getstartfigure get start figure getendfigure get end figure }*/ /* setstartconnector set start connector setendconnector set end connector /* if getstartconnector get start connector != getendconnector get end connector != { handledisconnect handle disconnect getstartfigure get start figure getendfigure get end figure }*/ that shares the same connectors that this has to work properly that must be registered as a figure listener to the connected figures persistence p e r s i s t e n c e /* basicsetpoint basic set point index point2d point2 d p { if index != 0 index != getpointcount get point count 1 { if getstartconnector get start connector != { point2d point2 d start = getstartconnector get start connector findstart find start this if start != { basicsetstartpoint basic set start point start } } if getendconnector get end connector != { point2d point2 d end = getendconnector get end connector findend find end this if end != { basicsetendpoint basic set end point end } } } super basicsetpoint basic set point index p } */ 